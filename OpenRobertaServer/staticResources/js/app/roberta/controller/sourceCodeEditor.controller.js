define(["require","exports","message","util.roberta","guiState.controller","program.model","program.controller","progRun.controller","import.controller","blockly","codeflask","jquery"],(function(o,e,t,r,a,n,i,c,d,s,u,l){var g,m,p;function f(o){var e=a.getBlocklyWorkspace(),r=s.Xml.workspaceToDom(e),c=s.Xml.domToText(r),d=!a.isConfigurationStandard()&&!a.isConfigurationAnonymous()?a.getConfigurationName():void 0,u=a.isConfigurationAnonymous()?a.getConfigurationXML():void 0,m=a.getLanguage();n.showSourceProgram(a.getProgramName(),d,c,u,i.SSID,i.password,m,(function(e){i.reloadProgram(e),"ok"==e.rc?(o&&l("#tabSourceCodeEditor").tabWrapShow(),a.setState(e),g.updateCode(e.sourceCode)):t.displayInformation(e,e.message,e.message,e.parameters)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.clickSourceCodeEditor=e.resetScroll=e.setCodeLanguage=e.init=void 0,e.init=function(){(g=new u("#flaskEditor",{language:"java",lineNumbers:!0,tabSize:4})).onUpdate((function(o){l("#sourceCodeEditorPane").hasClass("active")&&(p=!0)})),l("#backSourceCodeEditor").onWrap("click",(function(){return p?(l("#show-message-confirm").oneWrap("shown.bs.modal",(function(o){l("#confirm").off(),l("#confirm").on("click",(function(o){o.preventDefault(),p=!1,l("#tabProgram").tabWrapShow()})),l("#confirmCancel").off(),l("#confirmCancel").on("click",(function(o){o.preventDefault(),l(".modal").modal("hide")}))})),t.displayMessage("SOURCE_CODE_EDITOR_CLOSE_CONFIRMATION","POPUP","",!0,!1)):(p=!1,l("#tabProgram").tabWrapShow()),!1}),"back to previous view"),l("#runSourceCodeEditor").onWrap("click",(function(){return c.runNative(g.getCode()),!1}),"run button clicked"),l("#buildSourceCodeEditor").onWrap("click",(function(){return a.setRunEnabled(!1),l("#buildSourceCodeEditor").addClass("disabled"),n.compileN(a.getProgramName(),g.getCode(),a.getLanguage(),(function(o){"ok"==o.rc?t.displayMessage(o.message,"POPUP","",!1,!1):t.displayInformation(o,o.message,o.message,a.getProgramName()),a.setRunEnabled(!0),l("#buildSourceCodeEditor").removeClass("disabled")})),!1}),"build button clicked"),l("#downloadSourceCodeEditor").onWrap("click",(function(){var o=a.getProgramName()+"."+a.getSourceCodeFileExtension();return r.download(o,g.getCode()),t.displayMessage("MENU_MESSAGE_DOWNLOAD","TOAST",o),!1}),"download source code button clicked"),l("#uploadSourceCodeEditor").onWrap("click",(function(){return d.importSourceCode((function(o,e){g.updateCode(e)})),!1}),"upload source code button clicked"),l("#importSourceCodeEditor").onWrap("click",(function(){return f(!1),!1}),"import from blockly button clicked"),l("#tabSourceCodeEditor").onWrap("show.bs.tab",(function(){"python"!==m&&"json"!==m||l("#buildSourceCodeEditor").addClass("disabled"),l("#main-section").css("background-color","#EEE")}),"in show source code editor"),l("#tabSourceCodeEditor").onWrap("shown.bs.tab",(function(){a.setView("tabSourceCodeEditor")}),"after show source code editor"),l("#tabSourceCodeEditor").on("hide.bs.tab",(function(){l("#buildSourceCodeEditor").removeClass("disabled"),l("#main-section").css("background-color","#FFF")})),l("#sourceCodeEditorPane").find('button[name="rightMostButton"]').attr("title","").attr("rel","tooltip").attr("data-bs-placement","left").attr("lkey","Blockly.Msg.SOURCE_CODE_EDITOR_IMPORT_TOOLTIP").attr("data-bs-original-title",s.Msg.SOURCE_CODE_EDITOR_IMPORT_TOOLTIP).tooltip("_fixTitle")},e.clickSourceCodeEditor=function(){f(!0)},e.setCodeLanguage=function(o){var e;switch(o){case"py":e="python";break;case"java":e="java";break;case"ino":case"nxc":case"cpp":e="clike";break;default:e="js"}g.updateLanguage(e),m=e},e.resetScroll=function(){l(".codeflask__pre").attr("transform","translate3d(0px, 0px, 0px)"),l(".codeflask__lines").attr("transform","translate3d(0px, 0px, 0px)")}}));
//# sourceMappingURL=sourceCodeEditor.controller.js.map
//# sourceMappingURL=sourceCodeEditor.controller.js.map
