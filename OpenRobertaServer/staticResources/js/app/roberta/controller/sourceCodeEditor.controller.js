define(["require","exports","message","util.roberta","guiState.controller","program.model","program.controller","progRun.controller","import.controller","blockly","jquery","aceEditor"],(function(o,e,t,r,i,n,a,d,c,u,s,l){function g(o){var e=i.getBlocklyWorkspace(),r=u.Xml.workspaceToDom(e),d=u.Xml.domToText(r),c=!i.isConfigurationStandard()&&!i.isConfigurationAnonymous()?i.getConfigurationName():void 0,g=i.isConfigurationAnonymous()?i.getConfigurationXML():void 0,m=i.getLanguage();n.showSourceProgram(i.getProgramName(),c,d,g,a.getSSID(),a.getPassword(),m,(function(e){a.reloadProgram(e),"ok"==e.rc?(o&&s("#tabSourceCodeEditor").tabWrapShow(),i.setState(e),l.setEditorCode(e.sourceCode)):t.displayInformation(e,e.message,e.message,e.parameters)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.clickSourceCodeEditor=e.init=void 0,e.init=function(){s("#backSourceCodeEditor").onWrap("click",(function(){return l.wasEditedByUser()?(s("#show-message-confirm").oneWrap("shown.bs.modal",(function(){s("#confirm").off(),s("#confirm").on("click",(function(o){o.preventDefault(),l.setWasEditedByUser(!1),s("#tabProgram").tabWrapShow()})),s("#confirmCancel").off(),s("#confirmCancel").on("click",(function(o){o.preventDefault(),s(".modal").modal("hide")}))})),t.displayMessage("SOURCE_CODE_EDITOR_CLOSE_CONFIRMATION","POPUP","",!0,!1)):(l.setWasEditedByUser(!1),s("#tabProgram").tabWrapShow()),!1}),"back to previous view"),s("#runSourceCodeEditor").onWrap("click",(function(){return d.runNative(l.getEditorCode()),!1}),"run button clicked"),s("#buildSourceCodeEditor").onWrap("click",(function(){return i.setRunEnabled(!1),s("#buildSourceCodeEditor").addClass("disabled"),n.compileN(i.getProgramName(),l.getEditorCode(),i.getLanguage(),(function(o){"ok"==o.rc?t.displayMessage(o.message,"POPUP","",!1,!1):t.displayInformation(o,o.message,o.message,i.getProgramName()),i.setRunEnabled(!0),s("#buildSourceCodeEditor").removeClass("disabled")})),!1}),"build button clicked"),s("#downloadSourceCodeEditor").onWrap("click",(function(){var o=i.getProgramName()+"."+i.getSourceCodeFileExtension();return r.download(o,l.getEditorCode()),t.displayMessage("MENU_MESSAGE_DOWNLOAD","TOAST",o),!1}),"download source code button clicked"),s("#uploadSourceCodeEditor").onWrap("click",(function(){return c.importSourceCode((function(o,e){l.setEditorCode(e)})),!1}),"upload source code button clicked"),s("#importSourceCodeEditor").onWrap("click",(function(){return g(!1),!1}),"import from blockly button clicked"),s("#tabSourceCodeEditor").onWrap("show.bs.tab",(function(){"python"!==l.getCurrentLanguage()&&"json"!==l.getCurrentLanguage()||s("#buildSourceCodeEditor").addClass("disabled"),s("#main-section").css("background-color","#EEE")}),"in show source code aceEditorController"),s("#tabSourceCodeEditor").onWrap("shown.bs.tab",(function(){i.setView("tabSourceCodeEditor")}),"after show source code aceEditorController"),s("#tabSourceCodeEditor").on("hide.bs.tab",(function(){s("#buildSourceCodeEditor").removeClass("disabled"),s("#main-section").css("background-color","#FFF")})),s("#sourceCodeEditorPane").find('button[name="rightMostButton"]').attr("title","").attr("rel","tooltip").attr("data-bs-placement","left").attr("lkey","Blockly.Msg.SOURCE_CODE_EDITOR_IMPORT_TOOLTIP").attr("data-bs-original-title",u.Msg.SOURCE_CODE_EDITOR_IMPORT_TOOLTIP).tooltip("_fixTitle")},e.clickSourceCodeEditor=function(){g(!0)}}));
//# sourceMappingURL=sourceCodeEditor.controller.js.map
//# sourceMappingURL=sourceCodeEditor.controller.js.map
