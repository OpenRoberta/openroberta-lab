define(["require","exports","message","util.roberta","guiState.controller","program.controller","program.model","blockly","jquery","aceEditor"],(function(o,e,r,t,a,i,n,s,g,c){Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;var u,d=.5;e.init=function(){u=a.getBlocklyWorkspace(),g("#codeButton").off("click touchend"),g("#codeButton").onWrap("click touchend",(function(o){return function(o){if(g("#codeButton").hasClass("rightActive"))g("#blocklyDiv").closeRightView();else{var e=s.Xml.workspaceToDom(u),t=s.Xml.domToText(e),m=a.isConfigurationStandard()||a.isConfigurationAnonymous()?void 0:a.getConfigurationName(),l=a.isConfigurationAnonymous()?a.getConfigurationXML():void 0,f=a.getLanguage();n.showSourceProgram(a.getProgramName(),m,t,l,i.getSSID(),i.getPassword(),f,(function(e){i.reloadProgram(e),"ok"==e.rc?(a.setState(e),c.setViewCode(e.sourceCode),a.setProgramSource(e.sourceCode),o.openRightView(g("#codeDiv"),d)):r.displayInformation(e,e.message,e.message,e.parameters)}))}}(g(this)),!1})),g("#codeDownload").onWrap("click",(function(o){var e=a.getProgramName()+"."+a.getSourceCodeFileExtension();t.download(e,a.getProgramSource()),r.displayMessage("MENU_MESSAGE_DOWNLOAD","TOAST",e)}),"codeDownload clicked"),g("#codeRefresh").onWrap("click",(function(o){o.stopPropagation();var e=s.Xml.workspaceToDom(u),t=s.Xml.domToText(e),g=(a.getConfigurationXML(),a.isConfigurationStandard()||a.isConfigurationAnonymous()?void 0:a.getConfigurationName()),d=a.isConfigurationAnonymous()?a.getConfigurationXML():void 0,m=a.getLanguage();n.showSourceProgram(a.getProgramName(),g,t,d,i.getSSID(),i.getPassword(),m,(function(o){i.reloadProgram(o,!0),"ok"==o.rc?(a.setState(o),c.setViewCode(o.sourceCode),a.setProgramSource(o.sourceCode)):r.displayInformation(o,o.message,o.message,o.parameters)}))}),"code refresh clicked")}}));
//# sourceMappingURL=progCode.controller.js.map
//# sourceMappingURL=progCode.controller.js.map
