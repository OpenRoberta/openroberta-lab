define(["require","exports","message","util.roberta","guiState.controller","program.controller","program.model","blockly","codeflask","jquery","guiState.controller"],(function(o,e,a,t,r,n,i,s,c,g,u){Object.defineProperty(e,"__esModule",{value:!0}),e.setCodeLanguage=e.setCode=e.init=void 0;var d,l,m=.5;e.init=function(){d=r.getBlocklyWorkspace(),l=new c("#codeContent",{language:"java",lineNumbers:!0,readonly:!0}),g("#codeButton").off("click touchend"),g("#codeButton").onWrap("click touchend",(function(o){return function(o){if(g("#codeButton").hasClass("rightActive"))g("#blocklyDiv").closeRightView();else{var e=s.Xml.workspaceToDom(d),t=s.Xml.domToText(e),c=r.isConfigurationStandard()||r.isConfigurationAnonymous()?void 0:r.getConfigurationName(),u=r.isConfigurationAnonymous()?r.getConfigurationXML():void 0,f=r.getLanguage();i.showSourceProgram(r.getProgramName(),c,t,u,n.getSSID(),n.getPassword(),f,(function(e){n.reloadProgram(e),"ok"==e.rc?(r.setState(e),l.updateCode(e.sourceCode),r.setProgramSource(e.sourceCode),o.openRightView(g("#codeDiv"),m)):a.displayInformation(e,e.message,e.message,e.parameters)}))}}(g(this)),!1})),g("#codeDownload").onWrap("click",(function(o){var e=r.getProgramName()+"."+r.getSourceCodeFileExtension();t.download(e,r.getProgramSource()),a.displayMessage("MENU_MESSAGE_DOWNLOAD","TOAST",e)}),"codeDownload clicked"),g("#codeRefresh").onWrap("click",(function(o){o.stopPropagation();var e=s.Xml.workspaceToDom(d),t=s.Xml.domToText(e),c=(r.getConfigurationXML(),r.isConfigurationStandard()||r.isConfigurationAnonymous()?void 0:r.getConfigurationName()),g=r.isConfigurationAnonymous()?r.getConfigurationXML():void 0,u=r.getLanguage();i.showSourceProgram(r.getProgramName(),c,t,g,n.getSSID(),n.getPassword(),u,(function(o){n.reloadProgram(o,!0),"ok"==o.rc?(r.setState(o),l.updateCode(o.sourceCode),r.setProgramSource(o.sourceCode)):a.displayInformation(o,o.message,o.message,o.parameters)}))}),"code refresh clicked")},e.setCode=function(o){l.updateCode(o)},e.setCodeLanguage=function(o){var e;switch(o){case"py":e="python";break;case"java":e="java";break;case"ino":case"nxc":case"cpp":e="clike";break;default:e="js"}l.updateLanguage(e)}}));
//# sourceMappingURL=progCode.controller.js.map
//# sourceMappingURL=progCode.controller.js.map
