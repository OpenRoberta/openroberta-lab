define(["require","exports","message","util.roberta","guiState.controller","program.controller","program.model","blockly","codeflask","jquery"],(function(o,e,a,r,t,n,i,s,c,g){Object.defineProperty(e,"__esModule",{value:!0}),e.setCodeLanguage=e.setCode=e.init=void 0;var u,d,l=.5;e.init=function(){u=t.getBlocklyWorkspace(),d=new c("#codeContent",{language:"java",lineNumbers:!0,readonly:!0}),g("#codeButton").off("click touchend"),g("#codeButton").onWrap("click touchend",(function(o){return function(o){if(g("#codeButton").hasClass("rightActive"))g("#blocklyDiv").closeRightView();else{var e=s.Xml.workspaceToDom(u),r=s.Xml.domToText(e),c=t.isConfigurationStandard()||t.isConfigurationAnonymous()?void 0:t.getConfigurationName(),m=t.isConfigurationAnonymous()?t.getConfigurationXML():void 0,f=t.getLanguage();i.showSourceProgram(t.getProgramName(),c,r,m,n.getSSID(),n.password,f,(function(e){n.reloadProgram(e),"ok"==e.rc?(t.setState(e),d.updateCode(e.sourceCode),t.setProgramSource(e.sourceCode),o.openRightView(g("#codeDiv"),l)):a.displayInformation(e,e.message,e.message,e.parameters)}))}}(g(this)),!1})),g("#codeDownload").onWrap("click",(function(o){var e=t.getProgramName()+"."+t.getSourceCodeFileExtension();r.download(e,t.getProgramSource()),a.displayMessage("MENU_MESSAGE_DOWNLOAD","TOAST",e)}),"codeDownload clicked"),g("#codeRefresh").onWrap("click",(function(o){o.stopPropagation();var e=s.Xml.workspaceToDom(u),r=s.Xml.domToText(e),c=(t.getConfigurationXML(),t.isConfigurationStandard()||t.isConfigurationAnonymous()?void 0:t.getConfigurationName()),g=t.isConfigurationAnonymous()?t.getConfigurationXML():void 0,l=t.getLanguage();i.showSourceProgram(t.getProgramName(),c,r,g,n.getSSID(),n.password,l,(function(o){n.reloadProgram(o,!0),"ok"==o.rc?(t.setState(o),d.updateCode(o.sourceCode),t.setProgramSource(o.sourceCode)):a.displayInformation(o,o.message,o.message,o.parameters)}))}),"code refresh clicked")},e.setCode=function(o){d.updateCode(o)},e.setCodeLanguage=function(o){var e;switch(o){case"py":e="python";break;case"java":e="java";break;case"ino":case"nxc":case"cpp":e="clike";break;default:e="js"}d.updateLanguage(e)}}));
//# sourceMappingURL=progCode.controller.js.map
//# sourceMappingURL=progCode.controller.js.map
