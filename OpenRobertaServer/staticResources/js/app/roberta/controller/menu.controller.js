define(["require","exports","message","comm","wrap","user.controller","notification.controller","guiState.controller","program.controller","progRun.controller","configuration.controller","import.controller","tour.controller","sourceCodeEditor.controller","jquery","blockly","progTutorial.controller","util.roberta","connection.controller","slick"],(function(e,t,a,o,n,r,i,l,c,s,u,d,g,h,m,p,b,f,k){Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;var w,v=0,P="?",y="&",S="=",W="forgotPassword",C="activateAccount",L="loadSystem",O="tutorial",T="gallery",R="tour",_="kiosk",N="exampleView",E="loadProgram",I="extensions";function M(e){var t,a=decodeURIComponent(document.location.toString()),o=a.indexOf("?"),n=a=a.substring(o+1),r=n.indexOf("<");r>=0&&(n=a.substring(0,r),t=a.substring(r));var i,l,c=n.split(y);for(l=0;l<c.length;l++)if((i=c[l].split(S))[0]===e)return void 0===i[1]||("loadProgram"===i[0]?t:i[1])}function x(){null!=k.getConnectionInstance()&&k.getConnectionInstance().terminate(),m(".fromRight.rightActive").length>0?m("#blocklyDiv").closeRightView((function(){return f.closeSimRobotWindow(),m("#tabStart").tabWrapShow()})):m("#tabStart").tabWrapShow()}t.init=function(e){e&&e instanceof Function?(w=e,function(){m(".navbar-collapse a:not(.dropdown-toggle)").click((function(){m(".dropdown-menu.show").collapse("hide"),m(".navbar-collapse.show").collapse("hide")})),navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)||(m('[rel="tooltip"]').not(".rightMenuButton").tooltip({container:"body",placement:"right",trigger:"hover"}),m('[rel="tooltip"].rightMenuButton').tooltip({container:"body",placement:"left",trigger:"hover"}));if(document.addEventListener("gesturestart",(function(e){e.preventDefault(),e.stopPropagation()})),m(".blocklyButtonBack, .blocklyWidgetDiv, #head-navigation, #main-section, #tutorial-navigation").on("mousedown touchstart keydown",(function(e){if(m(e.target).not(".blocklyTreeLabel, .blocklytreerow, .toolboxicon, .goog-palette-colorswatch, .goog-menu-vertical, .goog-menuitem-checkbox, div.goog-menuitem-content, div.goog-menuitem, img").length>0){if(m(e.target).filter(".blocklyHtmlInput").length>0&&!e.metaKey)return;p&&p.getMainWorkspace()&&p.hideChaff()}})),m(".modal").onWrap("shown.bs.modal",(function(){m(this).find("[autofocus]").focus()})),m(".navbar-collapse").on("click",".dropdown-menu a,.visible-xs",(function(e){m("#navbarCollapse").collapse("hide")})),m("#head-navigation-gallery").on("click","a,.visible-xs",(function(e){m("#navbarCollapse").collapse("hide")})),l.isPublicServerVersion()){var e='<div href="#" id="feedbackButton" class="rightMenuButton" rel="tooltip" data-bs-original-title="" title=""><span id="" class="feedbackButton typcn typcn-feedback"></span></div>';m("#rightMenuDiv").append(e),window.onmessage=function(e){if("closeFeedback"===e.data)m("#feedbackIframe").oneWrap("load",(function(){setTimeout((function(){m("#feedbackIframe").attr("src","about:blank"),m("#feedbackModal").modal("hide")}),1e3)}));else if(e.data.indexOf("feedbackHeight")>=0){var t=e.data.split(":")[1]||400;m("#feedbackIframe").height(t)}},m("#feedbackButton").on("click","",(function(e){m("#feedbackModal").on("show.bs.modal",(function(){"de"===l.getLanguage().toLowerCase()?m("#feedbackIframe").attr("src","https://www.roberta-home.de/lab/feedback/"):m("#feedbackIframe").attr("src","https://www.roberta-home.de/en/lab/feedback/")})),m("#feedbackModal").modal("show")}))}m("#head-navigation-program-edit").on("click",".dropdown-menu li:not(.disabled) a",(function(e){var t=function(e){switch(e.target.id||e.currentTarget.id){case"menuRunProg":s.runOnBrick();break;case"menuRunSim":m("#simButton").clickWrap();break;case"menuCheckProg":c.checkProgram();break;case"menuNewProg":c.newProgram();break;case"menuListProg":m("#tabProgList").data("type","Programs"),m("#tabProgList").tabWrapShow();break;case"menuListExamples":m("#tabProgList").data("type","Examples"),m("#tabProgList").tabWrapShow();break;case"menuSaveProg":c.saveToServer();break;case"menuSaveAsProg":c.showSaveAsModal();break;case"menuShowCode":m("#codeButton").clickWrap();break;case"menuSourceCodeEditor":h.clickSourceCodeEditor();break;case"menuExportProg":c.exportXml();break;case"menuExportAllProgs":c.exportAllXml();break;case"menuImportProg":d.importXml();break;case"menuLinkProg":c.linkProgram();break;case"menuToolboxBeginner":m('.levelTabs a[href="#beginner"]').tabWrapShow();break;case"menuToolboxExpert":m('.levelTabs a[href="#expert"]').tabWrapShow();break;case"menuDefaultFirmware":k.getConnectionInstance().reset2DefaultFirmware()}};n.wrapUI(t,"edit menu click")(e)})),m("#head-navigation-configuration-edit").onWrap("click",".dropdown-menu li:not(.disabled) a",(function(e){switch(m(".modal").modal("hide"),e.target.id||e.currentTarget.id){case"menuCheckConfig":a.displayMessage("MESSAGE_NOT_AVAILABLE","POPUP","");break;case"menuNewConfig":u.newConfiguration();break;case"menuListConfig":m("#tabConfList").tabWrapShow();break;case"menuSaveConfig":u.saveToServer();break;case"menuSaveAsConfig":u.showSaveAsModal()}}),"configuration edit clicked"),m("#head-navigation-robot").onWrap("click",".dropdown-menu li:not(.disabled) a",(function(e){m(".modal").modal("hide");var t=e.currentTarget.id;"menuConnect"===t?k.getConnectionInstance().showConnectionModal():"menuRobotInfo"===t?k.getConnectionInstance().showRobotInfo():"menuWlan"===t?k.getConnectionInstance().showWlanModal():"menuRobotSwitch"===t&&x()}),"robot clicked"),m("#head-navigation-help").onWrap("click",".dropdown-menu li:not(.disabled) a",(function(e){m(".modal").modal("hide");var t=e.target.id;"menuAbout"===t?(m("#version").text(l.getServerVersion()),m("#show-about").modal("show")):"menuLogging"===t&&m("#tabLogList").tabWrapShow()}),"help clicked"),m(".menuGeneral").onWrap("click",(function(e){window.open("https://jira.iais.fraunhofer.de/wiki/display/ORInfo")}),"head navigation menu item general clicked"),m(".menuFaq").onWrap("click",(function(e){window.open("https://jira.iais.fraunhofer.de/wiki/display/ORInfo/FAQ")}),"head navigation menu item faq clicked"),m(".menuAboutProject").onWrap("click",(function(e){"de"==l.getLanguage()?window.open("https://www.roberta-home.de/index.php?id=135"):window.open("https://www.roberta-home.de/index.php?id=135&L=1")}),"head navigation menu item about clicked"),m(".menuShowStart").onWrap("click",(function(){return x()})),m("#head-navigation-user").onWrap("click",".dropdown-menu li:not(.disabled) a",(function(e){switch(m(".modal").modal("hide"),e.target.id){case"menuUserGroupLogin":r.showUserGroupLoginForm();break;case"menuLogout":r.logout();break;case"menuGroupPanel":m("#tabUserGroupList").tabWrapShow();break;case"menuChangeUser":r.showUserDataForm();break;case"menuDeleteUser":r.showDeleteUserModal();break;case"menuStateInfo":r.showUserInfo();break;case"menuNotification":i.showNotificationModal()}return!1}),"user clicked"),m(".menuLogin").onWrap("click",(function(e){r.showLoginForm()}),"head navigation menu item login clicked"),m("#menuTabProgram").onWrap("click","",(function(e){m("#tabSimulation").hasClass("tabClicked")&&m(".scroller-left").clickWrap(),m(".scroller-left").clickWrap(),m("#tabProgram").tabWrapShow()}),"tabProgram clicked"),m("#head-navigation-gallery").onWrap("click",(function(e){return m("#tabGalleryList").tabWrapShow(),!1}),"gallery clicked"),m("#head-navigation-tutorial").onWrap("click",(function(e){return m("#tabTutorialList").tabWrapShow(),!1}),"tutorial clicked"),m("#menuTabConfiguration").onWrap("click","",(function(e){(m("#tabProgram").hasClass("tabClicked")||m("#tabConfiguration").hasClass("tabClicked"))&&m(".scroller-right").clickWrap(),m("#tabConfiguration").clickWrap()}),"tabConfiguration clicked"),m("#menuTabNN").onWrap("click","",(function(e){(m("#tabProgram").hasClass("tabClicked")||m("#tabConfiguration").hasClass("tabClicked")||m("#tabNN").hasClass("tabClicked"))&&m(".scroller-right").clickWrap(),m("#tabNN").clickWrap()}),"tabNN clicked"),m("#menuTabNNLearn").onWrap("click","",(function(e){(m("#tabProgram").hasClass("tabClicked")||m("#tabConfiguration").hasClass("tabClicked")||m("#tabNNlearn").hasClass("tabClicked"))&&m(".scroller-right").clickWrap(),m("#tabNNlearn").clickWrap()}),"tabNNlearn clicked"),m("#menuTabTextly").onWrap("click","",(function(e){(m("#tabProgram").hasClass("tabClicked")||m("#tabConfiguration").hasClass("tabClicked")||m("#tabTextly").hasClass("tabClicked"))&&m(".scroller-right").clickWrap(),m("#tabTextly").clickWrap()}),"tabTextly clicked"),m(".navbar-fixed-top").on("mouseleave",(function(e){m(".navbar-fixed-top .dropdown").removeClass("open")})),m(".cancelPopup").onWrap("click",(function(){m(".ui-dialog-titlebar-close").clickWrap()}),"cancel popup clicked"),m("#about-join").onWrap("click",(function(){m("#show-about").modal("hide")}),"hide show about clicked"),m(window).on("beforeunload",(function(e){return p.Msg.POPUP_BEFOREUNLOAD})),m("#navbarCollapse").on("shown.bs.collapse",(function(){var e=Math.min(m(this).height(),Math.max(m("#blocklyDiv").height(),m("#brickly").height(),m("#nn").height()));m(this).css("height",e)})),m(document).onWrap("keydown",(function(e){if("tabProgram"===l.getView()){if((e.metaKey||e.ctrlKey)&&50==e.which){e.preventDefault();var t=l.getBlocklyWorkspace().newBlock("robActions_debug");return t.initSvg(),t.render(),t.setInTask(!1),!1}if((e.metaKey||e.ctrlKey)&&51==e.which){e.preventDefault();var o=l.getBlocklyWorkspace().newBlock("robActions_assert");o.initSvg(),o.setInTask(!1),o.render();var n=l.getBlocklyWorkspace().newBlock("logic_compare");n.initSvg(),n.setMovable(!1),n.setInTask(!1),n.setDeletable(!1),n.render();var r=o.getInput("OUT").connection,i=n.outputConnection;return r.connect(i),!1}var g;if((e.metaKey||e.ctrlKey)&&52==e.which)return e.preventDefault(),(g=l.getBlocklyWorkspace().newBlock("robActions_eval_expr")).initSvg(),g.render(),g.setInTask(!1),!1;if((e.metaKey||e.ctrlKey)&&53==e.which)return e.preventDefault(),(g=l.getBlocklyWorkspace().newBlock("robActions_eval_stmt")).initSvg(),g.render(),g.setInTask(!1),!1;if((e.metaKey||e.ctrlKey)&&83==e.which&&(e.preventDefault(),l.isUserLoggedIn()?"NEPOprog"===l.getProgramName()||e.shiftKey?c.showSaveAsModal():l.isProgramSaved()||c.saveToServer():a.displayMessage("ORA_PROGRAM_GET_ONE_ERROR_NOT_LOGGED_IN","POPUP","")),(e.metaKey||e.ctrlKey)&&82==e.which&&(e.preventDefault(),l.isRunEnabled()&&s.runOnBrick()),(e.metaKey||e.ctrlKey)&&77==e.which&&(e.preventDefault(),l.isUserLoggedIn()?(m("#progList").trigger("Programs"),m("#tabProgList").tabWrapShow()):a.displayMessage("ORA_PROGRAM_GET_ONE_ERROR_NOT_LOGGED_IN","POPUP","")),(e.metaKey||e.ctrlKey)&&73==e.which)return e.preventDefault(),d.importXml(),!1;if((e.metaKey||e.ctrlKey)&&69==e.which)return e.preventDefault(),c.exportXml(),!1}else"tabConfiguration"===l.getView()&&((e.metaKey||e.ctrlKey)&&83==e.which&&(e.preventDefault(),l.isUserLoggedIn()?l.isConfigurationStandard()||e.shiftKey?u.showSaveAsModal():l.isProgramSaved()||u.saveToServer():a.displayMessage("ORA_PROGRAM_GET_ONE_ERROR_NOT_LOGGED_IN","POPUP","")),(e.metaKey||e.ctrlKey)&&77==e.which&&(e.preventDefault(),l.isUserLoggedIn()?m("#tabConfList").tabWrapShow():a.displayMessage("ORA_PROGRAM_GET_ONE_ERROR_NOT_LOGGED_IN","POPUP","")))}))}(),function e(){setTimeout((function(){(v+=1e3)>=l.getPingTime()&&l.doPing()&&(o.ping((function(e){l.setState(e)})),v=0),e()}),1e3)}(),function(){var e=new URL(document.location),t=e.protocol+"//"+e.host,a=e.hash&&e.toString().indexOf("#")<=t.length+1||!1,o=""!==e.search||!1;if(a){var n=!0,i=void 0,s=decodeURI(document.location.hash).split("&&");"#overview"===s[0]?(l.setStartWithoutPopup(),w("ev3lejosv1",{},(function(){c.newProgram(!0),g.start("overview")})),i=t+P+"tour"+S+"overview"):"#loadProgram"===s[0]&&s.length>=4?(l.setStartWithoutPopup(),w&&w instanceof Function&&w(s[1],{},d.loadProgramFromXML,[s[2],s[3]]),i=t+P+"loadSystem"+S+s[1]+y+"loadProgram"+S+s[3]):"#loadSystem"===s[0]&&s.length>=2?(l.setStartWithoutPopup(),w&&w instanceof Function&&w(s[1],{}),i=t+P+"loadSystem"+S+s[1]):"#gallery"===s[0]?(n=!1,i=t+P+"loadSystem"+S+"<ROBOT_SYSTEM>"+y+T):"#tutorial"===s[0]&&(n=!1,i=t+P+"loadSystem"+S+"<ROBOT_SYSTEM>"+y+O,s.length>1&&(i+=S+s[1],s.length>2&&(i+=y+s[2])));var u=void 0;"de"===l.getLanguage()&&n?u="Die eingegebenen URL-Parameter sind in dieser Form veraltet und werden bald nicht mehr unterstützt.\nBitte verwende ab sofort nur noch folgende Schreibweise:\n":"en"===l.getLanguage()&&n?u="The URL parameters entered are outdated in this form and will soon no longer be supported.\nPlease use only the following spelling from now on:":"de"!==l.getLanguage()||n?"en"!==l.getLanguage()||n||(u="The URL parameters entered are outdated in this form and are no longer supported.\nPlease use only the following spelling from now on:"):u="Die eingegebenen URL-Parameter sind in dieser Form veraltet und werden nicht mehr unterstützt.\nBitte verwende ab sofort nur noch folgende Schreibweise:\n",u+=i,alert(u)}if(o){var h=M(W);h&&r.showResetPassword(h);var p=M(C);p&&r.activateAccount(p);var f=M(R);f&&(l.setStartWithoutPopup(),w("ev3lejosv1",(function(){c.newProgram(!0),g.start(f)})));var k=M(L);if(k){l.setStartWithoutPopup();var v=void 0,x={},A=[],B=M(O),D=M(E),U=M(N),K=M(T),G=M(I);if(B)if("true"===B||!0===B)v=function(){m('.navbar-nav a[href="#tutorialList"]').tab("show")};else{var F=M(_);!F||!0!==F&&"true"!==F||l.setKioskMode(!0),v=function(e){b.loadFromTutorial(e)},A.push(B)}else D?(v=d.loadProgramFromXML,A.push("NEPOprog"),A.push(D)):U?v=function(){m("#menuListExamples").clickWrap()}:K?v=function(){m("#tabGalleryList").tabWrapShow()}:G&&G.split(",").forEach((function(e){"calliope2017NoBlue"===k&&"blue"===e||(x[e]=!0)}));w&&w instanceof Function&&w(k,x,v,A)}}}(),f.cleanUri()):alert("Problem")}}));
//# sourceMappingURL=menu.controller.js.map
//# sourceMappingURL=menu.controller.js.map
