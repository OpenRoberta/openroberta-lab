define(["require","exports","simulation.constants","simulation.objects"],(function(t,r,e,n){Object.defineProperty(r,"__esModule",{value:!0}),r.rgbToHex=r.hexToHsv=r.hexToRGB=r.epsilonEqual=r.transform=r.getColor=r.rgbToHsv=r.checkInObstacle=r.isPointInsideRectangle=r.getDistanceToLine=r.getDistance=r.sqr=r.getDistanceToCircle=r.getLinesFromRect=r.isLineAlignedToPoint=r.intersects=r.getMiddleIntersectionCircleRect=r.inside=r.getIntersectionPointsCircle=r.getIntersectionPointsCircle2=r.getMiddleIntersectionPointCircle=r.getMiddleIntersectionPointCircles=r.getClosestIntersectionPointCircle=r.getIntersectionPoint=r.toDegree=r.toRadians=r.getDotProduct=void 0,r.getDotProduct=function(t,r){var e=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.sqrt(r.x*r.x+r.y*r.y);return 0==e||0==n?null:t.x/e*(r.x/n)+t.y/e*(r.y/n)},r.toRadians=function(t){return t*(Math.PI/180)},r.toDegree=function(t){return t*(180/Math.PI)};r.getIntersectionPoint=function(t,r){var e=(t.x1-t.x2)*(r.y1-r.y2)-(t.y1-t.y2)*(r.x1-r.x2);if(0===e)return null;var n=((r.x1-r.x2)*(t.x1*t.y2-t.y1*t.x2)-(t.x1-t.x2)*(r.x1*r.y2-r.y1*r.x2))/e,x=((r.y1-r.y2)*(t.x1*t.y2-t.y1*t.x2)-(t.y1-t.y2)*(r.x1*r.y2-r.y1*r.x2))/e;return i({x:n,y:x},t)&&i({x:n,y:x},r)?{x:n,y:x}:null};r.getClosestIntersectionPointCircle=function(t,e){var n=(0,r.getIntersectionPointsCircle)(t,e);return 1==n.length?n[0]:2==n.length?x({x:t.x1,y:t.y1},n[0])<x({x:t.x1,y:t.y1},n[1])?n[0]:n[1]:null};r.getMiddleIntersectionPointCircles=function(t,r){return(r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y)<(t.r+r.r)*(t.r+r.r)?{x:(t.x+r.x)/2,y:(t.y+r.y)/2}:null};r.getMiddleIntersectionPointCircle=function(t,e,n){n=n||0;var i={x:e.x,y:e.y,r:e.r+n},x=(0,r.getIntersectionPointsCircle)(t,i);return 1==x.length?x[0]:2==x.length?{x:.5*(x[0].x+x[1].x),y:.5*(x[0].y+x[1].y)}:null};r.getIntersectionPointsCircle2=function(t,r){var e,n,x,y,o,a;if(x=(e=t.x2-t.x1)*e+(n=t.y2-t.y1)*n,o=(y=2*(e*(t.x1-r.x)+n*(t.y1-r.y)))*y-4*x*((t.x1-r.x)*(t.x1-r.x)+(t.y1-r.y)*(t.y1-r.y)-r.r*r.r),x<=1e-7||o<0)return[];if(0==o)return a=-y/(2*x),i(c={x:t.x1+a*e,y:t.y1+a*n},t)?[c]:[];a=(-y+Math.sqrt(o))/(2*x);var c={x:t.x1+a*e,y:t.y1+a*n};a=(-y-Math.sqrt(o))/(2*x);var u={x:t.x1+a*e,y:t.y1+a*n};return i(c,t)&&i(u,t)?[c,u]:[]};r.getIntersectionPointsCircle=function(t,r){var e={x:t.x1,y:t.y1},n={x:t.x2,y:t.y2},i=r.x,y=r.y,a=r.r,c=function(t,r,e){return!!o(Math.sqrt(x(t,e))+Math.sqrt(x(r,e)),Math.sqrt(x(t,r)),2)},u=n.x-e.x,l=n.y-e.y,s=i-e.x,f=y-e.y,h=u*u+l*l,g=(u*s+l*f)/h,M=g*g-(s*s+f*f-a*a)/h;if(M<0)return[];var d=Math.sqrt(M),C=-g+d,R=-g-d,v={x:e.x-u*C,y:e.y-l*C};if(0==M)return c(e,n,v)?[v]:[];var I={x:e.x-u*R,y:e.y-l*R};return v=c(e,n,v)?v:null,I=c(e,n,I)?I:null,v&&I?[v,I]:v?[v]:I?[I]:[]};r.inside=function(t,r){return!(t.x-t.r<=r.x)&&(!(t.y-t.r<=r.y)&&(!(t.x+t.r>=r.x+r.w)&&!(t.y+t.r>=r.y+r.w)))};r.getMiddleIntersectionCircleRect=function(t,e,n){if((0,r.intersects)(t,e)){for(var i=0;i<n.length;i++){var x=(0,r.getMiddleIntersectionPointCircle)(n[i],t);if(x)return x}return null}return null};function i(t,r){return!(t.x<Math.min(r.x1,r.x2)-.01||t.x>Math.max(r.x1,r.x2)+.01)&&!(t.y<Math.min(r.y1,r.y2)-.01||t.y>Math.max(r.y1,r.y2)+.01)}r.intersects=function(t,r){var e=function(t,r,e){return t<r?r:t>e?e:t},n=e(t.x,r.x,r.x+r.w),i=e(t.y,r.y,r.y+r.h),x=t.x-n,y=t.y-i;return x*x+y*y<t.r*t.r},r.isLineAlignedToPoint=i;r.getLinesFromRect=function(t){return[{x1:t.x,y1:t.y,x2:t.x+t.w,y2:t.y},{x1:t.x+t.w,y1:t.y,x2:t.x+t.w,y2:t.x+t.h},{x1:t.x+t.w,y1:t.y+t.h,x2:t.x,y2:t.y+t.h},{x1:t.x,y1:t.y+t.h,x2:t.x,y2:t.y}]};r.getDistanceToCircle=function(t,r){var e=t.x-r.x,n=t.y-r.y,i=Math.sqrt(e*e+n*n),x=r.x+e/i*r.r,y=r.y+n/i*r.r;return{x:t.x-x,y:t.y-y}};function x(t,e){return(0,r.sqr)(t.x-e.x)+(0,r.sqr)(t.y-e.y)}function y(t,r,e){var n=x(r,e);if(0==n)return r;var i=((t.x-r.x)*(e.x-r.x)+(t.y-r.y)*(e.y-r.y))/n;return i<0?r:i>1?e:{x:r.x+i*(e.x-r.x),y:r.y+i*(e.y-r.y)}}r.sqr=function(t){return t*t},r.getDistance=x,r.getDistanceToLine=y;r.isPointInsideRectangle=function(t,r){var e=r.p1,n=r.p2,i=r.p3,o=r.p4,a=x(t,y(t,e,n)),c=x(t,y(t,n,i)),u=x(t,y(t,i,o)),l=x(t,y(t,o,e)),s=x(e,n),f=x(n,i);return a<=f&&u<=f&&c<=s&&l<=s};r.checkInObstacle=function(t,e){if(t instanceof n.RectangleSimulationObject)return e.rx>t.x&&e.rx<t.x+t.w&&e.ry>t.y&&e.ry<t.y+t.h;if(t instanceof n.TriangleSimulationObject){var i=Math.floor(Math.abs((t.bx-t.ax)*(t.cy-t.ay)-(t.cx-t.ax)*(t.by-t.ay)));return Math.floor(Math.abs((t.ax-e.rx)*(t.by-e.ry)-(t.bx-e.rx)*(t.ay-e.ry)))+Math.floor(Math.abs((t.bx-e.rx)*(t.cy-e.ry)-(t.cx-e.rx)*(t.by-e.ry)))+Math.floor(Math.abs((t.cx-e.rx)*(t.ay-e.ry)-(t.ax-e.rx)*(t.cy-e.ry)))<=i}return t instanceof n.CircleSimulationObject?(e.rx-t.x)*(e.rx-t.x)+(e.ry-t.y)*(e.ry-t.y)<=t.r*t.r:(0,r.isPointInsideRectangle)({x:e.rx,y:e.ry},{p1:{x:t.backLeft.rx,y:t.backLeft.ry},p2:{x:t.frontLeft.rx,y:t.frontLeft.ry},p3:{x:t.frontRight.rx,y:t.frontRight.ry},p4:{x:t.backRight.rx,y:t.backRight.ry}})||(0,r.isPointInsideRectangle)({x:e.rx,y:e.ry},{p1:{x:t.wheelFrontRight.rx,y:t.wheelFrontRight.ry},p2:{x:t.wheelBackRight.rx,y:t.wheelBackRight.ry},p3:{x:t.wheelBackLeft.rx,y:t.wheelBackLeft.ry},p4:{x:t.wheelFrontLeft.rx,y:t.wheelFrontLeft.ry}})};r.rgbToHsv=function(t,r,e){var n,i,x,y=Math.min(t,r,e),o=Math.max(t,r,e),a=o-y;return x=Math.floor(o/255*100),0===o?[0,0,0]:(i=Math.floor(a/o*100),n=t===o?(r-e)/a:r===o?2+(e-t)/a:4+(t-r)/a,(n=Math.floor(60*n))<0&&(n+=360),[n,i,x])};function o(t,r,e){return Math.abs(t-r)<=e}function a(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,r,e,n){return r+r+e+e+n+n}));var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]:null}r.getColor=function(t){return t[2]<=10?[e.default.COLOR_ENUM.BLACK,"#000000"]:(t[0]<10||t[0]>350)&&t[1]>90&&t[2]>50?[e.default.COLOR_ENUM.RED,"#FA010C"]:t[0]>40&&t[0]<70&&t[1]>90&&t[2]>50?[e.default.COLOR_ENUM.YELLOW,"#F7F700"]:t[0]<50&&t[1]>50&&t[1]<100&&t[2]<50?[e.default.COLOR_ENUM.BROWN,"#EBC300"]:t[1]<10&&t[2]>90?[e.default.COLOR_ENUM.WHITE,"#FFFFFF"]:t[0]>70&&t[0]<160&&t[1]>80?[e.default.COLOR_ENUM.GREEN,"#00852a"]:t[0]>165&&t[0]<=200&&t[1]>70&&t[2]>75?[e.default.COLOR_ENUM.NONE,"#33B8CA"]:t[0]>200&&t[0]<250&&t[1]>90&&t[2]>50?[e.default.COLOR_ENUM.BLUE,"#1e5aa8"]:[e.default.COLOR_ENUM.NONE,"#EBC300"]},r.transform=function(t,r){var e=Math.sin(t.theta),n=Math.cos(t.theta);r.rx=r.x*n-r.y*e+t.x,r.ry=r.x*e+r.y*n+t.y},r.epsilonEqual=o,r.hexToRGB=a,r.hexToHsv=function(t){var e=a(t);return(0,r.rgbToHsv)(e[0],e[1],e[2])};r.rgbToHex=function(t,r,e){return"#"+[t,r,e].map((function(t){var r=t.toString(16);return 1===r.length?"0"+r:r})).join("")}}));
//# sourceMappingURL=math.js.map
//# sourceMappingURL=math.js.map
