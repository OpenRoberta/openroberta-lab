define(["require","exports","simulation.constants","simulation.objects"],(function(t,e,r,n){Object.defineProperty(e,"__esModule",{value:!0}),e.hexToHsv=e.hexToRGB=e.epsilonEqual=e.transform=e.getColor=e.rgbToHsv=e.checkInObstacle=e.isPointInsideRectangle=e.getDistanceToLine=e.getDistance=e.sqr=e.getDistanceToCircle=e.getLinesFromObj=e.isLineAlignedToPoint=e.getIntersectionPointsCircle=e.getMiddleIntersectionPointCircle=e.getClosestIntersectionPointCircle=e.getIntersectionPoint=e.toDegree=e.toRadians=void 0,e.toRadians=function(t){return t*(Math.PI/180)},e.toDegree=function(t){return t*(180/Math.PI)};e.getIntersectionPoint=function(t,e){var r=(t.x1-t.x2)*(e.y1-e.y2)-(t.y1-t.y2)*(e.x1-e.x2);if(0===r)return null;var n=((e.x1-e.x2)*(t.x1*t.y2-t.y1*t.x2)-(t.x1-t.x2)*(e.x1*e.y2-e.y1*e.x2))/r,i=((e.y1-e.y2)*(t.x1*t.y2-t.y1*t.x2)-(t.y1-t.y2)*(e.x1*e.y2-e.y1*e.x2))/r;return this.isLineAlignedToPoint({x:n,y:i},t)&&this.isLineAlignedToPoint({x:n,y:i},e)?{x:n,y:i}:null};e.getClosestIntersectionPointCircle=function(t,e){var r=this.getIntersectionPointsCircle(t,e);return 1==r.length?r[0]:2==r.length?i({x:t.x1,y:t.y1},r[0])<i({x:t.x1,y:t.y1},r[1])?r[0]:r[1]:null};e.getMiddleIntersectionPointCircle=function(t,e){var r=this.getIntersectionPointsCircle(t,e);return 1==r.length?r[0]:2==r.length?{x:.5*(r[0].x+r[1].x),y:.5*(r[0].y+r[1].y)}:null};e.getIntersectionPointsCircle=function(t,e){var r,n,i,x,y,a;if(i=(r=t.x2-t.x1)*r+(n=t.y2-t.y1)*n,y=(x=2*(r*(t.x1-e.x)+n*(t.y1-e.y)))*x-4*i*((t.x1-e.x)*(t.x1-e.x)+(t.y1-e.y)*(t.y1-e.y)-e.r*e.r),i<=1e-7||y<0)return[];if(0==y){a=-x/(2*i);var o={x:t.x1+a*r,y:t.y1+a*n};return this.isLineAlignedToPoint(o,t)?[o]:[]}a=(-x+Math.sqrt(y))/(2*i);o={x:t.x1+a*r,y:t.y1+a*n};a=(-x-Math.sqrt(y))/(2*i);var c={x:t.x1+a*r,y:t.y1+a*n};return this.isLineAlignedToPoint(o,t)&&this.isLineAlignedToPoint(c,t)?[o,c]:[]},e.isLineAlignedToPoint=function(t,e){return!(t.x<Math.min(e.x1,e.x2)-.01||t.x>Math.max(e.x1,e.x2)+.01)&&!(t.y<Math.min(e.y1,e.y2)-.01||t.y>Math.max(e.y1,e.y2)+.01)};e.getLinesFromObj=function(t){switch(t.shape){case"rectangle":return[{x1:t.x,x2:t.x,y1:t.y,y2:t.y+t.h},{x1:t.x,x2:t.x+t.w,y1:t.y,y2:t.y},{x1:t.x+t.w,x2:t.x,y1:t.y+t.h,y2:t.y+t.h},{x1:t.x+t.w,x2:t.x+t.w,y1:t.y+t.h,y2:t.y}];case"robot":return[{x1:t.backLeft.rx,x2:t.frontLeft.rx,y1:t.backLeft.ry,y2:t.frontLeft.ry},{x1:t.frontLeft.rx,x2:t.frontRight.rx,y1:t.frontLeft.ry,y2:t.frontRight.ry},{x1:t.frontRight.rx,x2:t.backRight.rx,y1:t.frontRight.ry,y2:t.backRight.ry},{x1:t.backRight.rx,x2:t.backLeft.rx,y1:t.backRight.ry,y2:t.backLeft.ry}];case"triangle":return[{x1:t.ax,x2:t.bx,y1:t.ay,y2:t.by},{x1:t.bx,x2:t.cx,y1:t.by,y2:t.cy},{x1:t.ax,x2:t.cx,y1:t.ay,y2:t.cy}];default:return!1}};e.getDistanceToCircle=function(t,e){var r=t.x-e.x,n=t.y-e.y,i=Math.sqrt(r*r+n*n);return{x:e.x+r/i*e.r,y:e.y+n/i*e.r}};function i(t,r){return(0,e.sqr)(t.x-r.x)+(0,e.sqr)(t.y-r.y)}function x(t,e,r){var n=i(e,r);if(0==n)return e;var x=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return x<0?e:x>1?r:{x:e.x+x*(r.x-e.x),y:e.y+x*(r.y-e.y)}}e.sqr=function(t){return t*t},e.getDistance=i,e.getDistanceToLine=x;e.isPointInsideRectangle=function(t,e){var r=e.p1,n=e.p2,y=e.p3,a=e.p4,o=i(t,x(t,r,n)),c=i(t,x(t,n,y)),s=i(t,x(t,y,a)),f=i(t,x(t,a,r)),l=i(r,n),h=i(n,y);return o<=h&&s<=h&&c<=l&&f<=l};e.checkInObstacle=function(t,r){if(t instanceof n.RectangleSimulationObject)return r.rx>t.x&&r.rx<t.x+t.w&&r.ry>t.y&&r.ry<t.y+t.h;if(t instanceof n.TriangleSimulationObject){var i=Math.floor(Math.abs((t.bx-t.ax)*(t.cy-t.ay)-(t.cx-t.ax)*(t.by-t.ay)));return Math.floor(Math.abs((t.ax-r.rx)*(t.by-r.ry)-(t.bx-r.rx)*(t.ay-r.ry)))+Math.floor(Math.abs((t.bx-r.rx)*(t.cy-r.ry)-(t.cx-r.rx)*(t.by-r.ry)))+Math.floor(Math.abs((t.cx-r.rx)*(t.ay-r.ry)-(t.ax-r.rx)*(t.cy-r.ry)))<=i}return t instanceof n.CircleSimulationObject?(r.rx-t.x)*(r.rx-t.x)+(r.ry-t.y)*(r.ry-t.y)<=t.r*t.r:(0,e.isPointInsideRectangle)({x:r.rx,y:r.ry},{p1:{x:t.backLeft.rx,y:t.backLeft.ry},p2:{x:t.frontLeft.rx,y:t.frontLeft.ry},p3:{x:t.frontRight.rx,y:t.frontRight.ry},p4:{x:t.backRight.rx,y:t.backRight.ry}})||(0,e.isPointInsideRectangle)({x:r.rx,y:r.ry},{p1:{x:t.wheelFrontRight.rx,y:t.wheelFrontRight.ry},p2:{x:t.wheelBackRight.rx,y:t.wheelBackRight.ry},p3:{x:t.wheelBackLeft.rx,y:t.wheelBackLeft.ry},p4:{x:t.wheelFrontLeft.rx,y:t.wheelFrontLeft.ry}})};e.rgbToHsv=function(t,e,r){var n,i,x,y=Math.min(t,e,r),a=Math.max(t,e,r),o=a-y;return x=Math.floor(a/255*100),0===a?[0,0,0]:(i=Math.floor(o/a*100),n=t===a?(e-r)/o:e===a?2+(r-t)/o:4+(t-e)/o,(n=Math.floor(60*n))<0&&(n+=360),[n,i,x])};function y(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,r,n){return e+e+r+r+n+n}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null}e.getColor=function(t){return t[2]<=10?r.default.COLOR_ENUM.BLACK:(t[0]<10||t[0]>350)&&t[1]>90&&t[2]>50?r.default.COLOR_ENUM.RED:t[0]>40&&t[0]<70&&t[1]>90&&t[2]>50?r.default.COLOR_ENUM.YELLOW:t[0]<50&&t[1]>50&&t[1]<100&&t[2]<50?r.default.COLOR_ENUM.BROWN:t[1]<10&&t[2]>90?r.default.COLOR_ENUM.WHITE:t[0]>70&&t[0]<160&&t[1]>80?r.default.COLOR_ENUM.GREEN:t[0]>200&&t[0]<250&&t[1]>90&&t[2]>50?r.default.COLOR_ENUM.BLUE:r.default.COLOR_ENUM.NONE},e.transform=function(t,e){var r=Math.sin(t.theta),n=Math.cos(t.theta);e.rx=e.x*n-e.y*r+t.x,e.ry=e.x*r+e.y*n+t.y},e.epsilonEqual=function(t,e,r){return Math.abs(t-e)<=r},e.hexToRGB=y,e.hexToHsv=function(t){var r=y(t);return(0,e.rgbToHsv)(r[0],r[1],r[2])}}));
//# sourceMappingURL=math.js.map
//# sourceMappingURL=math.js.map
