var __extends=this&&this.__extends||function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},t(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var o,e=1,r=arguments.length;e<r;e++)for(var n in o=arguments[e])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t},__assign.apply(this,arguments)};define(["require","exports","./port","./const.robots"],(function(t,o,e,r){Object.defineProperty(o,"__esModule",{value:!0}),o.createRobotBlock=void 0;var n=function(t){function o(o){var e=t.call(this)||this;return e.robot=o,e.robotImageSrc=r.ROBOTS[e.robot.group+"_"+e.robot.name]?e.robot.group+"_"+e.robot.name:r.ROBOTS[e.robot.group]?e.robot.group:null,e.robotImageSrc?(e.width=r.ROBOTS[e.robotImageSrc].width,e.height=r.ROBOTS[e.robotImageSrc].height,e.size=new window.goog.math.Size(e.width,e.height+2*window.Blockly.BlockSvg.INLINE_PADDING_Y),e.ports_=[]):console.error("robot image invalid!"),e}return __extends(o,t),o.prototype.init=function(){this.element_||(this.element_=window.Blockly.createSvgElement("g",{},null),this.visible_||(this.element_.style.display="none"),this.initBoardView_(),this.initPorts_(),this.sourceBlock_.getSvgRoot().appendChild(this.element_))},o.prototype.initBoardView_=function(){var t=window.Blockly.getMainWorkspace();this.board_=window.Blockly.createSvgElement("image",{},this.element_);var o=t.options.pathToMedia+"robots/"+this.robotImageSrc+".svg",e=this.board_;e.setAttribute("href",o),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("width",this.width),e.setAttribute("height",this.height)},o.prototype.initPorts_=function(){var t=window.Blockly.createSvgElement("g",{},this.element_),o=r.ROBOTS[this.robot.group+"_"+this.robot.name]||r.ROBOTS[this.robot.group];this.ports_=o.ports.map((function(o){var r=o.name,n=o.position,i=new e.Port(t,r,n);return __assign({portSvg:i.element},o)}))},o.prototype.getPortByName=function(t){var o=this.ports_.findIndex((function(o){return o.name===t}));return this.ports_[o]},o.prototype.setPosition=function(t){},o.EDITABLE=!1,o.rectElement_=null,o}(window.Blockly.Field);o.createRobotBlock=function(t){return{init:function(){var o=this;this.type_="robConf_robot",this.svgPath_.remove(),this.robot_=new n(function(t){var o=t.split("_"),e={};return e.group=o[0],e.name=o[1],e}(t)),this.appendDummyInput().setAlign(window.Blockly.ALIGN_CENTRE).appendField(this.robot_,"ROBOT"),this.getPortByName=function(t){return o.robot_.getPortByName(t)}}}}}));
//# sourceMappingURL=robotBlock.js.map
//# sourceMappingURL=robotBlock.js.map
